<template>
  <div class="portal-wrap">
    <top-tool-bar></top-tool-bar>
    <portal-header></portal-header>

    <div class="portal-hot">
      <el-row :gutter="20">
        <el-col :span="12">
          <div>
            <div class="mt20 mb20">
              <span class="f24">图片新闻</span>
              <sup class="f24">
                <el-icon class="title-icon ml5">
                  <document />
                </el-icon>
              </sup>
            </div>
            <div>
              <el-carousel
                trigger="click"
                height="355px"
                indicator-position="outside"
                @change="handleChangeCarousel"
              >
                <el-carousel-item v-for="item in tpxwList" :key="item">
                  <img
                    :src="item.brief_image"
                    style="width: 100%; height: 100%"
                  />
                </el-carousel-item>
              </el-carousel>
              <div class="carousel-title">
                <span>{{ hotCarouselTitle }}</span>
              </div>
            </div>
          </div>
        </el-col>
        <el-col :span="12">
          <div>
            <div class="mt20 mb20">
              <span class="f24">热门视频</span>
              <sup class="f24">
                <el-icon class="title-icon ml5">
                  <svg
                    t="1645865782381"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="2042"
                    width="24"
                    height="24"
                  >
                    <path
                      d="M512 973.791c-52.461 0-103.358-10.689-151.278-31.771-46.168-20.311-87.599-49.354-123.143-86.323-35.445-36.868-63.266-79.779-82.688-127.543-20.079-49.376-30.26-101.791-30.26-155.789 0-76.174 20.685-150.313 59.818-214.401 10.648-17.44 33.421-22.946 50.86-12.296 17.44 10.649 22.945 33.42 12.296 50.861C215.566 449 198.63 509.804 198.63 572.366c0 180.544 140.577 327.427 313.369 327.427S825.368 752.91 825.368 572.366c0-110.518-52.83-212.837-141.32-273.704-16.836-11.581-21.097-34.617-9.516-51.453 11.58-16.836 34.617-21.097 51.453-9.516 108.566 74.677 173.383 199.789 173.383 334.674 0 53.998-10.181 106.413-30.259 155.789-19.424 47.764-47.244 90.676-82.689 127.543-35.543 36.97-76.975 66.013-123.142 86.324-47.919 21.078-98.816 31.768-151.278 31.768z"
                      p-id="2043"
                      fill="#de460c"
                    />
                    <path
                      d="M294.752 517.054c-2.053 0-4.121-0.171-6.188-0.521-23.418-3.969-44.603-23.504-73.119-67.428-16.428-25.304-29.16-49.675-29.694-50.7-9.44-18.123-2.402-40.468 15.721-49.909 18.119-9.441 40.464-2.405 49.905 15.715 0.212 0.404 9.875 18.854 22.492 38.897 4.915 7.808 9.235 14.218 12.989 19.471 9.437-16.672 20.913-38.662 32.433-64.923 24.901-56.77 55.18-145.879 58.018-248.004a37 37 0 0 1 51.565-32.98c2.023 0.867 50.15 21.817 102.025 71.623 30.269 29.062 55.959 62.223 76.356 98.561 14.638 26.078 26.541 53.808 35.616 82.916 7.76-15.36 15.787-36.988 22.426-67.31 4.369-19.961 24.091-32.601 44.057-28.231 19.962 4.37 32.602 24.096 28.23 44.057-30.781 140.595-96.974 158.175-109.931 160.272a36.998 36.998 0 0 1-42.465-30.799c-19.639-125.377-90.362-198.141-138.58-234.211-10.84 88.552-37.648 164.273-60.441 215.857-30.354 68.694-60.104 110.469-61.355 112.214a37.01 37.01 0 0 1-30.06 15.433z m11.917-71.585z m306.075-79.267c0 0.001 0 0.001 0 0 0 0.001 0 0.001 0 0z"
                      p-id="2044"
                      fill="#de460c"
                    />
                  </svg>
                </el-icon>
              </sup>
            </div>
            <div
              v-if="hotVideoList && hotVideoList.length > 0"
              class="video-wrap"
            >
              <div
                class="video-item"
                v-for="(hotvideoitem, i) in hotVideoList.slice(0, 6)"
                :key="i"
                @click.enter="onClick(v)"
              >
                <video-item
                  :src="hotvideoitem.video_facede"
                  :title="hotvideoitem.video_title"
                  :videoId="hotvideoitem.video_id"
                  :viewCount="hotvideoitem.view_count"
                  :appreciateCount="hotvideoitem.appreciate_count"
                />
                <div>
                  <!-- TODO 替换title -->
                  <div>{{hotvideoitem.video_title}}</div>
                  <span class="mr5">大学物理</span>
                  <span class="mr2">波力</span>
                  <span class="mr2">｜</span>
                  <span>{{hotvideoitem.teacher}}</span>
                </div>
              </div>
            </div>
            <!-- 否则，标签只是被初始化了，但是没有数据 -->
            <div v-else-if="hotVideoList">暂无视频</div>
            <!-- 标签容器还没被初始化 -->
            <div v-else>视频列表加载中...</div>
          </div>
        </el-col>
      </el-row>
    </div>

    <el-divider class="portal-divider"></el-divider>
    <!-- TODO 系统名称、点击跳转 -->
    <div class="portal-system">
      <div class="portal-system-item portal-system-item1 poi">
        <span>北京高校青年教师教学基本功比赛管理系统</span>
        <h2>
          系统入口
          <svg
            t="1645886669360"
            class="svg-icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="16268"
            width="22"
            height="22"
          >
            <path
              d="M512 1024c-8.533333 0-17.066667-4.266667-21.333333-8.533333-4.266667 0-128-76.8-448-76.8-25.6 0-42.666667-17.066667-42.666667-42.666667L0 42.666667c0-25.6 17.066667-42.666667 42.666667-42.666667 273.066667 0 418.133333 55.466667 469.333333 81.066667C563.2 55.466667 708.266667 0 981.333333 0c25.6 0 42.666667 17.066667 42.666667 42.666667l0 853.333333c0 25.6-17.066667 42.666667-42.666667 42.666667-320 0-443.733333 76.8-448 76.8C529.066667 1019.733333 520.533333 1024 512 1024zM85.333333 853.333333c247.466667 4.266667 375.466667 55.466667 426.666667 81.066667 51.2-25.6 179.2-72.533333 426.666667-81.066667L938.666667 85.333333c-290.133333 8.533333-401.066667 76.8-405.333333 76.8-12.8 8.533333-34.133333 8.533333-46.933333 0 0 0-115.2-72.533333-401.066667-76.8L85.333333 853.333333z"
              p-id="16269"
              fill="#ffffff"
            />
            <path
              d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 128c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 853.333333C554.666667 1006.933333 537.6 1024 512 1024z"
              p-id="16270"
              fill="#ffffff"
            />
            <path
              d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L0 213.333333c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 682.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
              p-id="16271"
              fill="#ffffff"
            />
            <path
              d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 682.666667C554.666667 1006.933333 537.6 1024 512 1024z"
              p-id="16272"
              fill="#ffffff"
            />
            <path
              d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L0 341.333333c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 554.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
              p-id="16273"
              fill="#ffffff"
            />
            <path
              d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 426.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 554.666667C554.666667 1006.933333 537.6 1024 512 1024z"
              p-id="16274"
              fill="#ffffff"
            />
            <path
              d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L0 469.333333c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 426.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
              p-id="16275"
              fill="#ffffff"
            />
            <path
              d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 554.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 426.666667C554.666667 1006.933333 537.6 1024 512 1024z"
              p-id="16276"
              fill="#ffffff"
            />
            <path
              d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667l0-298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 298.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
              p-id="16277"
              fill="#ffffff"
            />
            <path
              d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667l0-298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 298.666667C554.666667 1006.933333 537.6 1024 512 1024z"
              p-id="16278"
              fill="#ffffff"
            />
            <path
              d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667l0-170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 170.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
              p-id="16279"
              fill="#ffffff"
            />
            <path
              d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667l0-170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 170.666667C554.666667 1006.933333 537.6 1024 512 1024z"
              p-id="16280"
              fill="#ffffff"
            />
          </svg>
        </h2>
      </div>
      <div class="portal-system-item portal-system-item2 poi">
        <span>北京市师德榜样（先锋）推荐系列活动管理系统</span>
        <h2>
          系统入口
          <svg
            t="1645887690692"
            class="svg-icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="25514"
            width="22"
            height="22"
          >
            <path
              d="M128 789.333333V213.333333a128 128 0 0 1 128-128h597.333333a42.666667 42.666667 0 0 1 42.666667 42.666667v768a42.666667 42.666667 0 0 1-42.666667 42.666667H277.333333A149.333333 149.333333 0 0 1 128 789.333333zM810.666667 853.333333v-128H277.333333a64 64 0 0 0 0 128H810.666667zM426.666667 170.666667H256a42.666667 42.666667 0 0 0-42.666667 42.666666v441.045334A148.736 148.736 0 0 1 277.333333 640H810.666667V170.666667h-85.333334v341.333333l-149.333333-85.333333-149.333333 85.333333V170.666667z"
              p-id="25515"
              fill="#ffffff"
            />
          </svg>
        </h2>
      </div>
      <div class="portal-system-item portal-system-item3 poi">
        <span>北京市师德榜样（先锋）推荐系列活动管理系统</span>
        <h2>
          系统入口
          <svg
            t="1645887835978"
            class="svg-icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="26058"
            width="22"
            height="22"
          >
            <path
              d="M512 634.603243c-19.64973 0-38.745946-4.621838-53.773838-13.007567L48.515459 392.164324C26.485622 379.904 13.837838 360.198919 13.837838 338.196757c0-22.057514 12.647784-41.762595 34.705297-54.078271l409.683027-229.348324c29.972757-16.799135 77.491892-16.826811 107.575352 0l409.710702 229.348324c22.029838 12.343351 34.649946 32.048432 34.649946 54.105946 0 22.029838-12.647784 41.707243-34.677621 54.022919l-409.710703 229.348325c-15.000216 8.413405-34.096432 13.035243-53.773838 13.035243zM116.099459 338.141405l381.426163 213.545514c2.490811 1.383784 7.915243 2.767568 14.474378 2.767567 7.500108 0 12.647784-1.743568 14.474378-2.767567l381.453838-213.545514-381.426162-213.517837c-2.490811-1.383784-7.942919-2.767568-14.502054-2.767568-7.472432 0-12.620108 1.715892-14.446703 2.767568L116.099459 338.141405z m396.038919 589.602595c-169.292108 0-341.18573-53.967568-348.879567-157.197838a39.465514 39.465514 0 0 1-0.553514-6.642162V459.250162c0-22.140541 17.989189-40.074378 40.157406-40.074378a40.12973 40.12973 0 0 1 40.157405 40.074378V759.143784c0.166054 1.411459 0.276757 2.87827 0.276757 4.345081 0.332108 29.668324 102.649081 84.134054 268.813838 84.134054 166.192432 0 268.48173-54.46573 268.786162-84.134054l0.055351-1.632865V459.222486c0-22.140541 17.989189-40.074378 40.157406-40.074378 22.195892 0 40.157405 17.961514 40.157405 40.074378v304.70919c0 1.051676-0.027676 2.075676-0.110703 3.127351-4.040649 105.499676-177.871568 160.684973-349.045621 160.684973z m452.082163-104.198919a40.12973 40.12973 0 0 1-40.12973-40.074378V465.394162c0-22.140541 17.961514-40.074378 40.12973-40.074378 22.195892 0 40.157405 17.933838 40.157405 40.074378v318.076541c0 22.140541-17.989189 40.074378-40.12973 40.074378z"
              p-id="26059"
              data-spm-anchor-id="a313x.7781069.0.i25"
              class="selected"
              fill="#ffffff"
            />
          </svg>
        </h2>
      </div>
    </div>

    <div class="portal-videos mt30">
      <el-tabs
        v-model="videoTabActiveName"
        type="card"
        @tab-click="handleTabClick"
      >
        <el-tab-pane
          v-for="(item, i) in videoTabs"
          :key="item.name"
          :name="item.name"
        >
          <template #label>
            <span>
              {{ item.title }}
              <el-icon>
                <svg
                  v-if="i == 0"
                  t="1645886669360"
                  class="svg-icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="16268"
                  width="22"
                  height="22"
                >
                  <path
                    d="M512 1024c-8.533333 0-17.066667-4.266667-21.333333-8.533333-4.266667 0-128-76.8-448-76.8-25.6 0-42.666667-17.066667-42.666667-42.666667L0 42.666667c0-25.6 17.066667-42.666667 42.666667-42.666667 273.066667 0 418.133333 55.466667 469.333333 81.066667C563.2 55.466667 708.266667 0 981.333333 0c25.6 0 42.666667 17.066667 42.666667 42.666667l0 853.333333c0 25.6-17.066667 42.666667-42.666667 42.666667-320 0-443.733333 76.8-448 76.8C529.066667 1019.733333 520.533333 1024 512 1024zM85.333333 853.333333c247.466667 4.266667 375.466667 55.466667 426.666667 81.066667 51.2-25.6 179.2-72.533333 426.666667-81.066667L938.666667 85.333333c-290.133333 8.533333-401.066667 76.8-405.333333 76.8-12.8 8.533333-34.133333 8.533333-46.933333 0 0 0-115.2-72.533333-401.066667-76.8L85.333333 853.333333z"
                    p-id="16269"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 128c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 853.333333C554.666667 1006.933333 537.6 1024 512 1024z"
                    p-id="16270"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L0 213.333333c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 682.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
                    p-id="16271"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 682.666667C554.666667 1006.933333 537.6 1024 512 1024z"
                    p-id="16272"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L0 341.333333c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 554.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
                    p-id="16273"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 426.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 554.666667C554.666667 1006.933333 537.6 1024 512 1024z"
                    p-id="16274"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L0 469.333333c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 426.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
                    p-id="16275"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 554.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 426.666667C554.666667 1006.933333 537.6 1024 512 1024z"
                    p-id="16276"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667l0-298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 298.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
                    p-id="16277"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667l0-298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 298.666667C554.666667 1006.933333 537.6 1024 512 1024z"
                    p-id="16278"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667l0-170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 170.666667C85.333333 921.6 68.266667 938.666667 42.666667 938.666667z"
                    p-id="16279"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M512 1024c-25.6 0-42.666667-17.066667-42.666667-42.666667l0-170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 170.666667C554.666667 1006.933333 537.6 1024 512 1024z"
                    p-id="16280"
                    :fill="getTabIconColor(item.name)"
                  />
                </svg>
                <svg
                  v-else-if="i == 1"
                  t="1645887690692"
                  class="svg-icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="25514"
                  width="22"
                  height="22"
                >
                  <path
                    d="M128 789.333333V213.333333a128 128 0 0 1 128-128h597.333333a42.666667 42.666667 0 0 1 42.666667 42.666667v768a42.666667 42.666667 0 0 1-42.666667 42.666667H277.333333A149.333333 149.333333 0 0 1 128 789.333333zM810.666667 853.333333v-128H277.333333a64 64 0 0 0 0 128H810.666667zM426.666667 170.666667H256a42.666667 42.666667 0 0 0-42.666667 42.666666v441.045334A148.736 148.736 0 0 1 277.333333 640H810.666667V170.666667h-85.333334v341.333333l-149.333333-85.333333-149.333333 85.333333V170.666667z"
                    p-id="25515"
                    :fill="getTabIconColor(item.name)"
                  />
                </svg>
                <svg
                  v-else-if="i == 2"
                  t="1645887835978"
                  class="svg-icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="26058"
                  width="22"
                  height="22"
                >
                  <path
                    d="M512 634.603243c-19.64973 0-38.745946-4.621838-53.773838-13.007567L48.515459 392.164324C26.485622 379.904 13.837838 360.198919 13.837838 338.196757c0-22.057514 12.647784-41.762595 34.705297-54.078271l409.683027-229.348324c29.972757-16.799135 77.491892-16.826811 107.575352 0l409.710702 229.348324c22.029838 12.343351 34.649946 32.048432 34.649946 54.105946 0 22.029838-12.647784 41.707243-34.677621 54.022919l-409.710703 229.348325c-15.000216 8.413405-34.096432 13.035243-53.773838 13.035243zM116.099459 338.141405l381.426163 213.545514c2.490811 1.383784 7.915243 2.767568 14.474378 2.767567 7.500108 0 12.647784-1.743568 14.474378-2.767567l381.453838-213.545514-381.426162-213.517837c-2.490811-1.383784-7.942919-2.767568-14.502054-2.767568-7.472432 0-12.620108 1.715892-14.446703 2.767568L116.099459 338.141405z m396.038919 589.602595c-169.292108 0-341.18573-53.967568-348.879567-157.197838a39.465514 39.465514 0 0 1-0.553514-6.642162V459.250162c0-22.140541 17.989189-40.074378 40.157406-40.074378a40.12973 40.12973 0 0 1 40.157405 40.074378V759.143784c0.166054 1.411459 0.276757 2.87827 0.276757 4.345081 0.332108 29.668324 102.649081 84.134054 268.813838 84.134054 166.192432 0 268.48173-54.46573 268.786162-84.134054l0.055351-1.632865V459.222486c0-22.140541 17.989189-40.074378 40.157406-40.074378 22.195892 0 40.157405 17.961514 40.157405 40.074378v304.70919c0 1.051676-0.027676 2.075676-0.110703 3.127351-4.040649 105.499676-177.871568 160.684973-349.045621 160.684973z m452.082163-104.198919a40.12973 40.12973 0 0 1-40.12973-40.074378V465.394162c0-22.140541 17.961514-40.074378 40.12973-40.074378 22.195892 0 40.157405 17.933838 40.157405 40.074378v318.076541c0 22.140541-17.989189 40.074378-40.12973 40.074378z"
                    p-id="26059"
                    data-spm-anchor-id="a313x.7781069.0.i25"
                    class="selected"
                    :fill="getTabIconColor(item.name)"
                  />
                </svg>
                <svg
                  v-else-if="i == 3"
                  t="1645889534205"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="41831"
                  width="22"
                  height="22"
                >
                  <path
                    d="M704 446H320c-4.4 0-8 3.6-8 8v402c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8V454c0-4.4-3.6-8-8-8z m-328 64h272v117H376V510z m272 290H376V683h272v117z"
                    p-id="41832"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M424 748a32 32 0 1 0 64 0 32 32 0 1 0-64 0zM424 570a32 32 0 1 0 64 0 32 32 0 1 0-64 0z"
                    p-id="41833"
                    :fill="getTabIconColor(item.name)"
                  />
                  <path
                    d="M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7 0.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 0.5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2 0.6-93.4-62.7-172.1-148.6-194.9z"
                    p-id="41834"
                    :fill="getTabIconColor(item.name)"
                  />
                </svg>
              </el-icon>
              <!-- TODO 点击更多跳转 -->
              <el-button
                v-if="i == 3"
                type="text"
                class="more-btn"
                @click.stop="jump('')"
                >更多 ></el-button
              >
            </span>
          </template>
          <div v-if="item.content && item.content.length > 0">
            <el-row class="video-items">
              <div
                class="video-item"
                v-for="(ele, i) in item.content.slice(0, 12)"
                :key="i"
                @click.enter="onClick(v)"
              >
                <video-item
                  :src="ele.video_facede"
                  :videoId="ele.video_id"
                  :viewCount="ele.view_count"
                  :appreciateCount="ele.appreciate_count"
                />
                <div>
                  <!-- TODO 替换title -->
                  <div>第十一届</div>
                  <div>
                    <span class="mr5">大学物理</span>
                    <span>波粒二象性</span>
                  </div>
                  <div class="redColor">
                    <span class="mr5">理科类</span>
                    <span class="mr5">一等奖</span>
                    <span>张三</span>
                  </div>
                </div>
              </div>
            </el-row>
          </div>
          <div v-else-if="item.content">暂无视频</div>
          <div v-else>视频列表加载中...</div>
        </el-tab-pane>
      </el-tabs>
    </div>

    <div class="portal-notice pb20">
      <div class="portal-notice-content">
        <el-row :gutter="20">
          <el-col :span="12">
            <div class="mt20 mb20 rel">
              <span class="f24">通知公告</span>
              <sup class="f24">
                <el-icon class="title-icon ml5">
                  <svg
                    t="1645936733359"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="42752"
                    width="24"
                    height="24"
                  >
                    <path
                      d="M562.2 164v696c0 27.5-22.3 49.7-49.7 49.7h-29.3c-13-0.1-25.5-5.2-34.8-14.4L257.9 704.9c-27.9-28-65.9-43.7-105.4-43.8-23.2 0-45.5-9.2-61.9-25.6C74.2 619.1 65 596.9 65 573.6V450.4c0-48.3 39.2-87.5 87.5-87.5 39.5 0 77.5-15.8 105.4-43.8l190.4-190.4c9.3-9.2 21.8-14.4 34.8-14.4h29.3c27.5 0 49.8 22.2 49.8 49.7z m298.3 86c-4.8-4.8-11.1-7.8-17.9-8.4-6.9-0.2-13.6 2.5-18.4 7.5l-35.3 35.3c-8.8 9.5-8.8 24.3 0 33.8 95.5 111.6 95.5 276.2 0 387.8-8.8 9.5-8.8 24.3 0 33.8l35.3 35.3c4.8 4.9 11.5 7.6 18.4 7.5 6.8-0.5 13.2-3.5 17.9-8.5C991.8 624 991.8 400 860.5 250zM703.4 382.7c-7.2-0.3-14.2 2.4-19.4 7.5L648.7 426c-8.5 8.3-9.9 21.4-3.5 31.3 21.9 33.2 21.9 76.2 0 109.4-6.5 9.9-5 23 3.5 31.3l35.3 35.8c5.2 4.9 12.2 7.4 19.4 7 7.2-0.5 13.8-3.9 18.4-9.4 53-70.7 53-167.9 0-238.6-4.7-5.7-11.2-9.2-18.4-10.1z m0 0"
                      fill="#de460c"
                      p-id="42753"
                    />
                  </svg>
                </el-icon>
              </sup>
              <!-- TODO 点击更多跳转 -->
              <el-button type="text" class="more-btn" @click="jump('')"
                >更多 ></el-button
              >
            </div>
            <el-table
              :data="tzggList"
              :show-header="false"
              class="p10"
              height="200"
              @row-click="showBrief"
              empty-text="暂无数据"
            >
              <el-table-column prop="brief_title">
                <template #default="scope">
                  <!-- TODO 替换名称 -->
                  <div>{{ scope.row.brief_title }}</div>
                </template>
              </el-table-column>
              <el-table-column
                prop="create_time"
                label
                width="130"
                :formatter="methods.dateFormat"
              ></el-table-column>
            </el-table>
          </el-col>

          <el-col :span="12">
            <div class="mt20 mb20 rel">
              <span class="f24">政策法规</span>
              <sup class="f24">
                <el-icon class="title-icon ml5">
                  <svg
                    t="1645936798330"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="43887"
                    width="24"
                    height="24"
                  >
                    <path
                      d="M511.034511 132.881426c85.158519 71.912843 211.894991 155.165965 317.351811 189.163267l0 75.074859c-5.618974 198.600197-145.651264 407.207305-317.351811 497.987868-171.702594-90.781586-311.737954-299.387671-317.368184-497.987868l0-75.074859C299.136449 288.048415 425.873945 204.794269 511.034511 132.881426M511.008928 61.321624c-8.833179 0-17.664312 3.236718-24.642237 9.735735-88.019683 82.098833-193.45399 142.368498-308.032562 176.141696-23.585161 6.950296-39.857776 28.955472-39.857776 53.970192l0 97.130178c6.473435 245.14528 151.727657 464.266859 372.558158 562.04786 220.828454-97.781 366.082676-316.903603 372.555088-562.04786l0-97.130178c0-25.040303-16.259312-46.99636-39.870056-53.970192-114.568339-33.772174-219.978087-94.018304-307.99777-176.116113C528.724405 64.582901 519.866666 61.321624 511.008928 61.321624L511.008928 61.321624zM384.132262 487.85509c-28.932959-19.747763-45.925982-29.393447-75.319429-41.333384l15.156188-34.903951c28.474518 11.022031 56.949037 23.422456 81.749886 36.282345L384.132262 487.85509zM360.709807 696.822402c-16.074094-13.319353-29.851888-22.50455-45.467541-32.149211 11.94096-21.585621 23.422456-48.223305 36.282345-81.749886 9.644661-24.799826 15.156188-43.171242 19.289322-69.808926 10.562567 9.18622 22.50455 15.156188 37.20025 20.667715C374.947066 631.147634 364.84294 667.429978 360.709807 696.822402zM400.206356 384.980072c-16.074094-22.045085-40.874943-44.548612-62.001099-58.785871l26.178219-29.851888c26.178219 18.829857 44.548612 33.526581 67.511603 54.652737L400.206356 384.980072zM578.401828 465.811028c62.001099 0 102.875019-1.378393 137.320529-4.592598l0 41.793872c-35.82288-3.216251-78.994122-4.592598-145.587819-4.592598-67.971068 0-110.223381 1.37737-146.505725 4.592598l0-41.793872c30.770817 2.75474 65.215304 4.133134 116.194372 4.592598l0-82.20935c-37.659715 0.459464-66.134233 1.836835-88.63776 4.592598l0-40.415478c22.503527 2.755764 50.978045 4.134157 88.63776 4.592598 0-42.252313-2.296299-63.837934-4.592598-75.319429 13.319353 1.836835 32.607652 3.215228 48.682769 2.755764 11.94096 0 11.481496 3.215228 3.673669 9.644661-5.511527 4.592598-9.185196 15.615653-9.185196 25.718755l0 37.201274c48.681746 0 84.96409-1.378393 110.682845-4.592598l0 40.415478c-25.718755-3.215228-62.001099-4.592598-110.682845-4.592598L578.401828 465.811028zM585.750189 566.850236l32.607652-16.991999c26.637684 34.444487 58.326407 80.371492 82.208327 118.031207l-41.334407 23.88192c-5.969968-13.319353-12.399401-25.718755-18.828834-36.740786l-124.920104 17.452487c-32.149211 4.592598-49.601698 8.725732-63.379493 14.6957-3.674693-12.399401-11.022031-27.096125-18.370393-39.037085 23.422456-12.399401 50.51858-47.304376 96.90505-146.966213 11.022031 7.348362 25.718755 15.615653 38.119179 21.12718 11.022031 5.052063 11.022031 8.267291 0.917906 11.481496-7.807826 2.296299-14.696724 10.104125-82.20935 105.631806 43.171242-2.296299 92.312452-7.348362 136.402623-14.237259C611.468944 603.591021 598.610078 583.842235 585.750189 566.850236z"
                      p-id="43888"
                      fill="#de460c"
                    />
                  </svg>
                </el-icon>
              </sup>
              <!-- TODO 点击更多跳转 -->
              <el-button type="text" class="more-btn" @click="jump('')"
                >更多 ></el-button
              >
            </div>
            <el-table
              :data="zcfgList"
              :show-header="false"
              class="customer-table p10"
              height="200"
              empty-text="暂无数据"
              @row-click="showBrief"
            >
              <el-table-column type="index" width="30" />
              <el-table-column prop="brief_title" />
              <el-table-column
                prop="create_time"
                label
                width="130"
                :formatter="methods.dateFormat"
              ></el-table-column>
            </el-table>
          </el-col>
        </el-row>
      </div>
    </div>

    <portal-footer></portal-footer>
  </div>
</template>

<script>
import moment from "moment";
import { onMounted, ref, reactive, getCurrentInstance, computed } from "vue";
import portalHeader from "../components/PortalHeader.vue";
import PortalFooter from "../components/PortalFooter.vue";
import TopToolBar from "../components/TopToolBar.vue";
import VideoItem from "../components/VideoItem.vue";
import { getVideoList, getBriefList } from "../api/serviceApi";
import { Document } from "@element-plus/icons-vue";
import { onBeforeRouteUpdate, useRoute, useRouter } from "vue-router";

export default {
  components: {
    portalHeader,
    PortalFooter,
    TopToolBar,
    VideoItem,
    Document,
  },
  methods: {
    showBrief(row) {
      const href = this.$router.replace({
        path: "/BriefShow",
        query: { briefId: row.brief_id },
      });
      window.open(href, "_blank");
    },
  },
  setup() {
    const router = useRouter();
    const route = useRoute();

    let userId = "";
    let userRole = "";
    let userName = "";
    let realName = ref("");
    let userSchool = "";


    let tpxwList = ref([]); //图片新闻模型列表
    let qjsVideoList = ref([]); //青教赛视频模型列表
    let qgsVideoList = ref([]); //青管赛视频模型列表
    let sdbyVideoList = ref([]); //师德榜样视频模型列表
    let yktVideoList = ref([]); //云课堂视频模型列表
    let hotVideoList = ref([]); //热门视频模型列表
    let tzggList = ref([]); //通知公告模型列表
    let zcfgList = ref([]); //政策法规模型列表
    const handleTabClick = (tab, event) => {
      console.log(tab, event);
      switch (tab.paneName) {
        case "qjs":
          methods.getQjsVideoList();
          break;
        case "qgs":
          methods.getQgsVideoList();
          break;
        case "sdby":
          methods.getSdbyVideoList();
          break;
        case "ykt":
          methods.getYktVideoList();
          break;
        default:
          break;
      }
    };

    let hotCarouselTitle = ref("热门轮播的title"); // 热门轮播的title
    // 轮播change回调
    const handleChangeCarousel = (index) => {
      hotCarouselTitle.value = tpxwList.value[index].brief_title;
    };

    // 跳转
    const jump = (path) => {
      // TODO
    };

    let videoTabActiveName = ref("qjs");
    const methods = {
      getTpxwList() {
        let query = reactive({
          params: {
            briefType: "0503", //图片新闻
            briefState: "0401", //已发布
            topN: 4,
          },
        });
        getBriefList(query).then((res) => {
          if (res.resultCode == "200") {
            tpxwList.value = JSON.parse(res.data.BriefList);
          }
        });
      },
      getHotVideoList() {
        //热门视频
        let query = reactive({
          params: {
            userId: userId,
            userRole:userRole,
            // videoSchool: userSchool,  
            orderBy: "hot",
            topN: 6,
          },
        });
        getVideoList(query).then((res) => {
          if (res.resultCode == "200") {
            hotVideoList.value = JSON.parse(res.data.videoList);
          }
        });
      },
      getQjsVideoList() {
        let query = reactive({
          params: {
            userId: userId,
            userRole:userRole,
            videoSchool: userSchool,  
            videoType: "0201", //青教赛视频
            videoState: "0401", //已发布
            topN: 12,
          },
        });
        getVideoList(query).then((res) => {
          if (res.resultCode == "200") {
            qjsVideoList.value = JSON.parse(res.data.videoList);
            videoTabs.value[0].content = qjsVideoList;
          }
        });
      },
      getQgsVideoList() {
        let query = reactive({
          params: {
            userId: userId,
            userRole:userRole,
            videoSchool: userSchool,  
            videoType: "0202", //青管赛视频
            videoState: "0401", //已发布
            topN: 12,
          },
        });
        getVideoList(query).then((res) => {
          if (res.resultCode == "200") {
            qgsVideoList.value = JSON.parse(res.data.videoList);
            videoTabs.value[1].content = qgsVideoList;
          }
        });
      },
      getSdbyVideoList() {
        let query = reactive({
          params: {
            userId: userId,
            userRole:userRole,
            videoSchool: userSchool,  
            videoType: "0203", //师德榜样视频
            videoState: "0401", //已发布
            topN: 12,
          },
        });

        getVideoList(query).then((res) => {
          if (res.resultCode == "200") {
            sdbyVideoList.value = JSON.parse(res.data.videoList);
            videoTabs.value[2].content = sdbyVideoList;
          }
        });
      },
      getYktVideoList() {
        let query = reactive({
          params: {
            userId: userId,
            userRole:userRole,
            videoSchool: userSchool,  
            videoType: "0204", //云课堂视频
            videoState: "0401", //已发布
            topN: 12,
          },
        });
        getVideoList(query).then((res) => {
          if (res.resultCode == "200") {
            yktVideoList.value = JSON.parse(res.data.videoList);
            videoTabs.value[3].content = yktVideoList;
          }
        });
      },
      getTzggList() {
        //通知公告
        let query = reactive({
          params: {
            briefType: "0501", //通知公告
            briefState: "0401", //已发布
            topN: 6,
          },
        });
        getBriefList(query).then((res) => {
          if (res.resultCode == "200") {
            tzggList.value = JSON.parse(res.data.BriefList);
          }
        });
      },
      getZcfgList() {
        //政策法规
        let query = reactive({
          params: {
            briefType: "0502", //政策法规
            briefState: "0401", //已发布
            topN: 6,
          },
        });
        getBriefList(query).then((res) => {
          if (res.resultCode == "200") {
            zcfgList.value = JSON.parse(res.data.BriefList);
          }
        });
      },
      getVideoList() {},
      dateFormat(date) {
        return moment(date).format("YYYY-MM-DD");
      },
    };
    const videoTabs = ref([
      {
        title: "青教赛优秀视频",
        name: "qjs",
        content: [],
      },
      {
        title: "青管赛优秀视频",
        name: "qgs",
        content: [],
      },
      {
        title: "师德榜样优秀视频",
        name: "sdby",
        content: [],
      },
      {
        title: "云课堂",
        name: "ykt",
        content: [],
      },
    ]); 

    const getTabIconColor = computed(() => {
      return function (name) {
        return name == this.videoTabActiveName ? "#ffffff" : "#5f6061";
      };
    });
    const getSession = () => {
      userId = localStorage.getItem("user_id");
      userRole = localStorage.getItem("user_role");
      userName = localStorage.getItem("user_name");
      realName.value = localStorage.getItem("real_name");
      userSchool = localStorage.getItem("user_school");
    };

    onMounted(() => {
      getSession();
      methods.getTpxwList();
      methods.getTzggList();
      methods.getZcfgList();
      methods.getVideoList();
      methods.getHotVideoList();
      methods.getQjsVideoList();
    });

    return {
      userId,
      userRole,
      userName,
      realName,
      userSchool,

      getTabIconColor,
      getCurrentInstance,
      videoTabActiveName,
      videoTabs,
      handleTabClick,
      handleChangeCarousel,
      hotCarouselTitle,
      moment,
      getVideoList,
      getBriefList,
      jump,
      tpxwList,
      qjsVideoList,
      qgsVideoList,
      sdbyVideoList,
      yktVideoList,
      hotVideoList,
      methods,
      getSession,
      tzggList,
      zcfgList,
    };
  },
};
</script>

<style scoped>
.portal-wrap {
  height: 100%;
  overflow: auto;
}

.portal-hot {
  width: 1200px;
  margin: 20px auto;
}
.portal-hot .title-icon {
  color: #de460c;
}
.portal-hot .carousel-title {
  background-color: rgba(44, 38, 41, 0.4);
  height: 50px;
  line-height: 50px;
  margin-top: -50px;
  color: #fff;
  font-size: 20px;
  padding: 0 40px;
  position: relative;
  z-index: 1;
}
.portal-hot .el-carousel {
  --el-carousel-indicator-width: 10px;
  --el-carousel-indicator-height: 10px;
  --el-carousel-indicator-out-color: #fff;
}
.portal-hot :deep .el-carousel__indicators--outside {
  bottom: 8px;
  right: 40px;
  left: auto;
  position: absolute;
}
.portal-hot .video-wrap {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  margin-bottom: -35px;
}
.portal-hot .video-item {
  /* 视频比是16:9 */
  width: 176px;
  margin-bottom: 35px;
}

.portal-divider {
  width: 1280px;
  margin: 22px auto;
}

.portal-system {
  width: 1200px;
  margin: 0 auto;
  display: flex;
  justify-content: space-around;
  align-items: center;
}
.portal-system-item {
  width: 350px;
  height: 80px;
  box-sizing: border-box;
  padding-left: 20px;
  border-top-right-radius: 6px;
  color: #fff;
  display: flex;
  flex-direction: column;
  justify-content: center;
  font-size: 14px;
}
.portal-system-item1 {
  background: #02519b;
}
.portal-system-item2 {
  background: #07a991;
}
.portal-system-item3 {
  background: #2292b9;
}
.portal-system-item h2 {
  letter-spacing: 4px;
}
.portal-system-item .svg-icon {
  margin-bottom: -4px;
  margin-left: 4px;
}

.portal-videos {
  background: #07a991;
  margin-bottom: 50px;
}
.portal-videos :deep .el-tabs__header {
  border-bottom: none;
  background: #edeeef;
  margin-bottom: 5px;
}
.portal-videos :deep .el-tabs--card > .el-tabs__header .el-tabs__nav {
  min-width: 1262px;
  left: 50%;
  transform: translateX(-50%) !important;
  border: none;
}
.portal-videos :deep .el-tabs__header .el-tabs__item {
  height: 70px;
  line-height: 90px;
  font-size: 24px;
  color: #5f6061;
  padding: 0 40px;
  border: none;
}
.portal-videos :deep .el-tabs__header .el-tabs__item.is-active {
  color: #fff;
  background: #07a991;
  border-bottom: none;
}
.more-btn {
  color: #5f6061;
}
.portal-videos .more-btn {
  position: absolute;
  right: -244px;
  top: 32px;
}
.portal-videos :deep .el-tabs__content {
  width: 1262px;
  margin: 0 auto;
  position: relative;
  background: #fff;
  min-height: 100px;
}
.portal-videos .video-items {
  margin: 30px;
}
.portal-videos .video-item {
  /* 视频比是16:9 */
  width: 176px;
  margin-bottom: 35px;
  margin-right: 80px;
}
.portal-videos .video-item:nth-child(5n) {
  margin-right: 0;
}
.redColor {
  color: #de460c;
}

.portal-notice {
  background: #faeae2;
  margin-bottom: 30px;
}
.portal-notice-content {
  width: 1200px;
  margin: 0 auto;
}
.portal-notice-content .more-btn {
  position: absolute;
  right: 0;
  bottom: -20px;
}
.portal-notice-content .customer-table {
  --el-table-border: none;
}
.portal-notice-content .customer-table.el-table :deep .el-table__cell {
  padding: 2px 0;
}

.el-carousel__item h3 {
  color: #475669;
  font-size: 14px;
  opacity: 0.75;
  line-height: 150px;
  margin: 0;
  text-align: center;
}
.el-carousel__item:nth-child(2n) {
  background-color: #99a9bf;
}
.el-carousel__item:nth-child(2n + 1) {
  background-color: #d3dce6;
}
.bg-purple {
  background: #d5d5da;
}
.cnm {
  margin-left: 100px;
  margin-right: 100px;
}
.center {
  display: flex;
  justify-content: center;
  align-items: center;
}
.horizontal-center {
  display: flex;
  justify-content: center;
}
.vertical-center {
  display: flex;
  align-items: center;
}
/* .line_file {
  display: inline-block;
  width: 20%;
  height: 20%;
} */
/* text-align: center; */
/* background-color: #d3d3d3; */
</style>